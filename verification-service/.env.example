# ==================================
# Verification Service - Environment Variables
# ==================================
# Copy this file to .env for local development
# For production, use secret management (AWS Secrets Manager, Vault, etc.)

# ==================================
# Server Configuration
# ==================================
PORT=8088
GIN_MODE=debug  # Options: debug, release (use 'release' in production)

# ==================================
# Database Configuration
# ==================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=dev
DB_PASSWORD=devpass
DB_NAME=tesseract_hub
DB_SSLMODE=disable  # Options: disable, require (use 'require' in production)

# ==================================
# Email Provider Configuration
# ==================================
# Email provider to use
EMAIL_PROVIDER=resend  # Options: resend, sendgrid

# Email API Key (REQUIRED)
# - Resend: Get from https://resend.com/api-keys
# - SendGrid: Get from https://app.sendgrid.com/settings/api_keys
EMAIL_API_KEY=re_your_resend_api_key_here

# Email sender details
# NOTE: For production, verify custom domain first in Resend
EMAIL_FROM=onboarding@tesserix.app  # Production: use your verified domain
EMAIL_FROM_NAME=Tesserix Hub

# ==================================
# Security Configuration
# ==================================
# API Key for inter-service authentication (REQUIRED)
# This is used by tenant-service to call verification-service
# Generate with: openssl rand -base64 32
API_KEY=tesseract_verification_dev_key_2025

# Encryption key for storing verification codes (REQUIRED)
# MUST be exactly 32 characters (256 bits) for AES-256 encryption
# Generate with: openssl rand -base64 32 | head -c 32
ENCRYPTION_KEY=twelve_chars_twelve_chars_12_

# ==================================
# OTP Configuration
# ==================================
OTP_LENGTH=6  # Number of digits in verification code
OTP_EXPIRY_MINUTES=10  # How long the code is valid (in minutes)

# ==================================
# Rate Limiting Configuration
# ==================================
# Maximum verification attempts per code before it's invalidated
MAX_VERIFICATION_ATTEMPTS=3

# Maximum codes that can be sent per hour per recipient
MAX_CODES_PER_HOUR=5

# Cooldown period after hitting rate limit (in minutes)
COOLDOWN_MINUTES=60

# ==================================
# NOTES
# ==================================
# Required Environment Variables (service will NOT start without these):
# - EMAIL_API_KEY
# - API_KEY
# - ENCRYPTION_KEY (must be exactly 32 characters)
#
# For Production:
# - Set GIN_MODE=release
# - Set DB_SSLMODE=require
# - Use a managed database (AWS RDS, Cloud SQL, etc.)
# - Verify custom email domain in Resend/SendGrid
# - Use secrets management instead of .env file
# - Rotate API keys regularly (every 90 days recommended)
#
# To generate secure keys:
# - API Key: openssl rand -base64 32
# - Encryption Key: openssl rand -base64 32 | head -c 32
#
# Dev Mock Codes (for testing):
# - Any code from 000000 to 999999 will be accepted
# - Real codes are 6-digit OTPs sent via email
